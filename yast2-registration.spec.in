@HEADER-COMMENT@

@HEADER@
Requires:	yast2
Requires:   yast2-network
Requires:	suseRegister
Requires:   perl-TimeDate limal limal-perl limal-ca-mgm-perl
# because of SourceManager
Requires:	yast2-packager >= 2.13.152

%if %sles_version
Requires:   zmd rug
%endif

BuildRequires:	perl-XML-Writer update-desktop-files yast2 yast2-devtools yast2-testsuite yast2-packager 
BuildRequires:  perl-TimeDate limal limal-perl limal-ca-mgm-perl

BuildArchitectures:	noarch

Summary:	Configuration of registration

%description
Performs the Registration

@PREP@

@BUILD@

@INSTALL@
%if %sles_version
    rm $RPM_BUILD_ROOT/%{prefix}/share/applications/YaST2/suse_register.desktop
%else
    rm $RPM_BUILD_ROOT/%{prefix}/share/applications/YaST2/customer_center.desktop
%endif

@CLEAN@


%pre
/usr/sbin/groupadd -r suse-ncc 2> /dev/null || :
/usr/sbin/useradd -r -s /bin/bash -c "Novell Customer Center User" -d /var/lib/YaST2/suse-ncc-fakehome -g suse-ncc suse-ncc 2> /dev/null || :


%files
%defattr(-,root,root)
%doc @docdir@

@clientdir@/*.ycp
@moduledir@/*.pm
@moduledir@/*.ycp
@moduledir@/*.ybc
@desktopdir@/*.desktop
@schemadir@/autoyast/rnc/registration.rnc
/usr/share/YaST2/yastbrowser

# agents
@scrconfdir@/cfg_suse_register.scr

#fillup
@fillupdir@/sysconfig.suse_register-yast2-registration

